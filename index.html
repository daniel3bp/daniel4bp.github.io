<!DOCTYPE html>
<html lang="fi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JSON-datan käsittely</title>
    <!-- Linkitetään Bootstrap ja oma CSS -->
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container mt-5">
        <h1>JSON-datan esitys</h1>
        <div id="vastaus"></div>
    </div>

    <script>
        // Haetaan JSON-tiedosto ja käsitellään se
        fetch('tietue.JSON')  // Muokkaa polku oikeaksi
            .then(function(response) {
                return response.json(); // Muutetaan vastaus JSON-olioksi
            })
            .then(function(responseJson) {
                kerro(responseJson); // Kutsutaan funktiota, joka käsittelee tiedot
            })
            .catch(function(error) {
                document.getElementById("vastaus").innerHTML = "<p>Tietoa ei pystytä hakemaan</p>";
            });

        // Funktio, joka käsittelee JSON-datan ja näyttää sen HTML:ssä
        function kerro(obj) {
            let tiedot = "<h1>" + obj.otsikko + "</h1><br>" + obj.kuvaus + "<br><hr>";
            tiedot += "<p><img src='" + obj.kuva + "' alt='Kurssikuva' style='width: 100%;'></p>";

            // Opintojakson tiedot
            tiedot += "<h3>Opintojakso</h3>";
            tiedot += "Nimi: " + obj.opintojakso.nimi + "<br>";
            tiedot += "Tunnus: " + obj.opintojakso.tunnus + "<br>";
            tiedot += "Opintopisteet: " + obj.opintojakso.opintopisteet + "<br><hr>";

            // Aiheet ja linkit
            tiedot += "<h3>Aiheet</h3><ul>";
            for (var i = 0; i < obj.tekniikat.length; i++) {
                tiedot += "<li><b>Aihe: " + obj.tekniikat[i].aihe + "</b> - ";
                tiedot += "<a href='" + obj.tekniikat[i].linkki + "'>" + obj.tekniikat[i].linkki + "</a></li>";
            }
            tiedot += "</ul>";

            // Näytetään tiedot HTML-sivulla
            document.getElementById("vastaus").innerHTML = tiedot;
        }
    </script>
</body>
</html>
